INFO:root:日志系统已初始化
INFO:datasets:PyTorch version 2.6.0 available.
d:\desktop\code\test.py:9: LangChainDeprecationWarning: The class `HuggingFaceBgeEmbeddings` was deprecated in LangChain 0.2.2 and will be removed in 1.0. An updated version of the class exists in the :class:`~langchain-huggingface package and should be used instead. To use it run `pip install -U :class:`~langchain-huggingface` and import as `from :class:`~langchain_huggingface import HuggingFaceEmbeddings``.
  embeddings = HuggingFaceBgeEmbeddings(
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: BAAI/bge-large-zh-v1.5
INFO:faiss.loader:Loading faiss with AVX2 support.
INFO:faiss.loader:Successfully loaded faiss with AVX2 support.
INFO:faiss:Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
['什么是宏利环球货币保障计划？', '保单的身故赔偿如何计算？', '保单支持哪些货币？', '如何行使终期红利锁定权益？']
['这是一款分红型终身人寿保险计划，提供身故赔偿、意外身故赔偿及现金价值积累功 能，支持多币种转换，并包含终期红利等非保证利益。', '身故赔偿为以下两者的较高者：(a) 表格所示现金价值 + 终期红利（如有）；或 (b) 所 有已缴保费总和。若受保人在首5年内意外身故，还可额外获得意外身故赔偿（上限为125, 000美元或等值货币）。', '支持美元、港币、人民币、澳元、加元、英镑、新加坡元等，且可从第3个保单周年日 起申请货币转换。', '从第15个保单周年日起，保单持有人可申请将终期红利的最高50%锁定为累积已锁定终 期红利，需在31日内提交书面申请，锁定后不可撤回']
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: cpu
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: BAAI/bge-base-zh-v1.5

=== 测试检索效果 ===

Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.20it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.20it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 12.23it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  6.42it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  6.42it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 11.03it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.10it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.09it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 15.02it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  7.27it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  7.16it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 14.10it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  7.13it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  7.04it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 15.75it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.55it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.55it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 14.79it/s]
[1] Query: 什么是宏利环球货币保障计划？
    ✅ 正确答案: 这是一款分红型终身人寿保险计划，提供身故赔偿、意外身故赔偿及现金价值积累功 能，支持多币种转换，并包含终期红利等非保证利...
    📄 召回文档:
        1. 受保人：保单编号：保单生效日：#宏利环球货币保障计划此乃分红人寿保单。![](images/65f55d82459069...
        2. 受保人：保单编号：保单生效日：#宏利环球货币保障计划此乃分红人寿保单。![](images/65f55d82459069...
        3. #6.貨幣風險本計劃適用以外幣作為貨幣單位。您應考慮潛在的貨幣風險。匯率可跌亦可升，而任何匯率波動會直接影響您以本地貨幣...
    🎯 Precision: 0.00 | 🔎 Recall: 0

Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.57it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.57it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 12.00it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.58it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.58it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 12.04it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  3.95it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  3.90it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 12.19it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.57it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.57it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 11.55it/s]
[2] Query: 保单的身故赔偿如何计算？
    ✅ 正确答案: 身故赔偿为以下两者的较高者：(a) 表格所示现金价值 + 终期红利（如有）；或 (b) 所 有已缴保费总和。若受保人在首...
    📄 召回文档:
        1. #10.身故赔偿当受保人身故及本公司收到符合「索偿通知及证明」条款规定的认可身故证明，并且经本公司批核后，本公司将给予身...
        2. #10.身故赔偿当受保人身故及本公司收到符合「索偿通知及证明」条款规定的认可身故证明，并且经本公司批核后，本公司将给予身...
        3. #11.意外身故赔偿当受保人在首五个保单年度内意外身故及本公司收到受保人身故的认可证明，并且经本公司批核后，本公司将根据...
    🎯 Precision: 1.00 | 🔎 Recall: 1

Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  9.12it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  9.04it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 20.20it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.52it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.51it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 17.88it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 10.62it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 20.26it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  9.23it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  9.23it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 18.93it/s]
[3] Query: 保单支持哪些货币？
    ✅ 正确答案: 支持美元、港币、人民币、澳元、加元、英镑、新加坡元等，且可从第3个保单周年日 起申请货币转换。
    📄 召回文档:
        1. $xx,xxx.xx</td><td></td><td></td></tr><tr><td>货币</td><td>列于本...
        2. 美元港元人民幣加元澳元英鎊新加坡元由第3個保單周年日起，您可於每個保單年度在無須另外進行驗身的情況下，透過將您的計劃轉換...
        3. 在任何情況下亦必須符合新計劃及原有計劃的產品規定，例如最高投保額、最低投保額及最低保費要求等新計劃的保單貨幣可能有別於原...
    🎯 Precision: 0.67 | 🔎 Recall: 1

Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  3.79it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  3.75it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 15.95it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.17it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  4.17it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 13.96it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  5.09it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  5.09it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 14.51it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  3.73it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00,  3.70it/s]
Batches:   0%|                                                                                     | 0/1 [00:00<?, ?it/s]Batches: 100%|#############################################################################| 1/1 [00:00<00:00, 13.43it/s]
[4] Query: 如何行使终期红利锁定权益？
    ✅ 正确答案: 从第15个保单周年日起，保单持有人可申请将终期红利的最高50%锁定为累积已锁定终 期红利，需在31日内提交书面申请，锁定...
    📄 召回文档:
        1. #一般条款(2)终期红利锁定权益于终期红利锁定周年日起计三十一（31）日内且受保人在世期间，保单持有人可选择将终期红利转...
        2. 6.保留於本公司之非保證入息的積存利率並非保證及我們可不時對之作出變動。請參閱以下「重要事項」的「影響非保證終期紅利、非...
        3. 当行使终期红利锁定权益后，已锁定的终期红利金额将会从当时的终期红利中扣除。#19.累积已锁定终期红利任何根据「终期红利锁...
    🎯 Precision: 0.67 | 🔎 Recall: 1

=== 统计结果 ===
📊 平均 Precision: 0.5833
📊 平均 Recall: 0.7500
